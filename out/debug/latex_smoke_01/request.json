{
  "model": "gpt-5-mini",
  "input": "You output JSON but it failed MVIR validation.\nFix the JSON to conform EXACTLY to MVIR v0.1.\nDo NOT change trace spans or span_ids; keep them identical.\nAll trace references must be existing span_ids.\n\nAllowed values:\nAssumption.kind MUST be exactly one of: [\"given\",\"derived\",\"wlog\"]\nGoal.kind MUST be exactly one of: [\"prove\",\"find\",\"compute\",\"maximize\",\"minimize\",\"exists\",\"counterexample\"]\nConcept.role MUST be exactly one of: [\"domain\",\"pattern\",\"candidate_tool\",\"definition\",\"representation_hint\"]\nEntity.kind MUST be exactly one of: [\"variable\",\"constant\",\"function\",\"set\",\"sequence\",\"point\",\"vector\",\"object\"]\n\nRequired fields:\nEntity requires: id, kind, type\nAssumption requires: expr, kind\nGoal requires: kind, expr\nConcept requires: id, role\nWarning requires: code, message\nMVIR.trace must be non-empty\nProblem ID: latex_smoke_01\n\nValidation errors (first lines):\n5 validation errors for MVIR\nassumptions.0.expr.Gt.lhs.Symbol.id\n  Field required [type=missing, input_value={'node': 'Symbol'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nassumptions.0.expr.Gt.rhs.Number.value\n  Field required [type=missing, input_value={'node': 'Number'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\ngoal.expr.Ge.lhs.Pow.base\n  Field required [type=missing, input_value={'node': 'Pow'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\ngoal.expr.Ge.lhs.Pow.exp\n  Field required [type=missing, input_value={'node': 'Pow'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\ngoal.expr.Ge.rhs.Number.value\n  Field required [type=missing, input_value={'node': 'Number'}, input_type=dict]\n\nPrevious JSON output:\n{\n  \"meta\": {\n    \"version\": \"0.1\",\n    \"id\": \"latex_smoke_01\",\n    \"generator\": \"assistant\",\n    \"created_at\": null\n  },\n  \"source\": {\n    \"text\": \"Compute $x^2 + 1$.\\nLet \\\\(x > 0\\\\). Show that \\\\[x^2 \\\\ge 0\\\\].\\nAlso $$\\\\sum_{k=1}^n k = \\\\frac{n(n+1)}{2}$$.\\n\",\n    \"normalized_text\": null,\n    \"spans\": null\n  },\n  \"entities\": [\n    {\n      \"id\": \"x\",\n      \"kind\": \"variable\",\n      \"type\": \"Real\",\n      \"properties\": [\n        \"positive\"\n      ],\n      \"trace\": [\n        \"s2\"\n      ]\n    },\n    {\n      \"id\": \"n\",\n      \"kind\": \"variable\",\n      \"type\": \"Natural\",\n      \"properties\": [],\n      \"trace\": [\n        \"s4\"\n      ]\n    },\n    {\n      \"id\": \"k\",\n      \"kind\": \"variable\",\n      \"type\": \"Integer\",\n      \"properties\": [],\n      \"trace\": [\n        \"s4\"\n      ]\n    }\n  ],\n  \"assumptions\": [\n    {\n      \"expr\": {\n        \"node\": \"Gt\",\n        \"id\": null,\n        \"value\": null,\n        \"lhs\": {\n          \"node\": \"Symbol\"\n        },\n        \"rhs\": {\n          \"node\": \"Number\"\n        },\n        \"args\": null,\n        \"base\": null,\n        \"exp\": null,\n        \"num\": null,\n        \"den\": null,\n        \"arg\": null,\n        \"var\": null,\n        \"from\": null,\n        \"to\": null,\n        \"body\": null,\n        \"fn\": null\n      },\n      \"kind\": \"given\",\n      \"trace\": [\n        \"s2\"\n      ],\n      \"id\": null\n    }\n  ],\n  \"goal\": {\n    \"kind\": \"prove\",\n    \"expr\": {\n      \"node\": \"Ge\",\n      \"id\": null,\n      \"value\": null,\n      \"lhs\": {\n        \"node\": \"Pow\"\n      },\n      \"rhs\": {\n        \"node\": \"Number\"\n      },\n      \"args\": null,\n      \"base\": null,\n      \"exp\": null,\n      \"num\": null,\n      \"den\": null,\n      \"arg\": null,\n      \"var\": null,\n      \"from\": null,\n      \"to\": null,\n      \"body\": null,\n      \"fn\": null\n    },\n    \"trace\": [\n      \"s3\"\n    ],\n    \"target\": null\n  },\n  \"concepts\": [\n    {\n      \"id\": \"square_nonnegativity\",\n      \"role\": \"domain\",\n      \"trigger\": \"x^2 >= 0\",\n      \"confidence\": null,\n      \"trace\": [\n        \"s3\"\n      ],\n      \"name\": \"square_of_real_is_nonnegative\"\n    },\n    {\n      \"id\": \"arithmetic_series_formula\",\n      \"role\": \"pattern\",\n      \"trigger\": \"sum_{k=1}^n k = n(n+1)/2\",\n      \"confidence\": null,\n      \"trace\": [\n        \"s4\"\n      ],\n      \"name\": \"arithmetic_series\"\n    }\n  ],\n  \"warnings\": [\n    {\n      \"code\": \"multiple_tasks\",\n      \"message\": \"The input contains multiple tasks. Primary goal selected: prove x^2 >= 0. Secondary tasks not addressed as primary: compute x^2 + 1 (s1), verify the sum formula (s4).\",\n      \"trace\": [\n        \"s1\",\n        \"s4\"\n      ],\n      \"details\": {\n        \t} \n    }\n  ],\n  \"trace\": [\n    {\n      \"span_id\": \"s0\",\n      \"start\": 0,\n      \"end\": 103,\n      \"text\": \"Compute $x^2 + 1$.\\nLet \\\\(x > 0\\\\). Show that \\\\[x^2 \\\\ge 0\\\\].\\nAlso $$\\\\sum_{k=1}^n k = \\\\frac{n(n+1)}{2}$$.\\n\"\n    },\n    {\n      \"span_id\": \"s1\",\n      \"start\": 0,\n      \"end\": 18,\n      \"text\": \"Compute $x^2 + 1$.\"\n    },\n    {\n      \"span_id\": \"s2\",\n      \"start\": 18,\n      \"end\": 33,\n      \"text\": \"\\nLet \\\\(x > 0\\\\).\"\n    },\n    {\n      \"span_id\": \"s3\",\n      \"start\": 33,\n      \"end\": 58,\n      \"text\": \" Show that \\\\[x^2 \\\\ge 0\\\\].\"\n    },\n    {\n      \"span_id\": \"s4\",\n      \"start\": 58,\n      \"end\": 102,\n      \"text\": \"\\nAlso $$\\\\sum_{k=1}^n k = \\\\frac{n(n+1)}{2}$$.\"\n    }\n  ]\n}\n\nReturn corrected JSON only.",
  "text": {
    "format": {
      "type": "json_schema",
      "name": "mvir_v01",
      "schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "title": "MVIR v0.1 OpenAI Subset",
        "type": "object",
        "additionalProperties": false,
        "required": [
          "meta",
          "source",
          "entities",
          "assumptions",
          "goal",
          "concepts",
          "warnings",
          "trace"
        ],
        "properties": {
          "meta": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "version",
              "id",
              "generator",
              "created_at"
            ],
            "properties": {
              "version": {
                "type": "string",
                "const": "0.1"
              },
              "id": {
                "type": "string"
              },
              "generator": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "created_at": {
                "type": [
                  "string",
                  "null"
                ]
              }
            }
          },
          "source": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "text",
              "normalized_text",
              "spans"
            ],
            "properties": {
              "text": {
                "type": "string"
              },
              "normalized_text": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "spans": {
                "type": [
                  "array",
                  "null"
                ],
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {},
                  "required": []
                }
              }
            }
          },
          "entities": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "id",
                "kind",
                "type",
                "properties",
                "trace"
              ],
              "properties": {
                "id": {
                  "type": "string"
                },
                "kind": {
                  "type": "string",
                  "enum": [
                    "variable",
                    "constant",
                    "function",
                    "set",
                    "sequence",
                    "point",
                    "vector",
                    "object"
                  ]
                },
                "type": {
                  "type": "string"
                },
                "properties": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "trace": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "assumptions": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "expr",
                "kind",
                "trace",
                "id"
              ],
              "properties": {
                "expr": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "node": {
                      "type": "string",
                      "enum": [
                        "Symbol",
                        "Number",
                        "Bool",
                        "True",
                        "False",
                        "Add",
                        "Mul",
                        "Div",
                        "Pow",
                        "Neg",
                        "Eq",
                        "Neq",
                        "Lt",
                        "Le",
                        "Gt",
                        "Ge",
                        "Divides",
                        "Sum",
                        "Call"
                      ]
                    },
                    "id": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "value": {
                      "type": [
                        "number",
                        "boolean",
                        "null"
                      ]
                    },
                    "lhs": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "rhs": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "args": {
                      "type": [
                        "array",
                        "null"
                      ],
                      "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                          "node": {
                            "type": "string",
                            "enum": [
                              "Symbol",
                              "Number",
                              "Bool",
                              "True",
                              "False",
                              "Add",
                              "Mul",
                              "Div",
                              "Pow",
                              "Neg",
                              "Eq",
                              "Neq",
                              "Lt",
                              "Le",
                              "Gt",
                              "Ge",
                              "Divides",
                              "Sum",
                              "Call"
                            ]
                          }
                        },
                        "required": [
                          "node"
                        ]
                      }
                    },
                    "base": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "exp": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "num": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "den": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "arg": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "var": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "from": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "to": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "body": {
                      "type": [
                        "object",
                        "null"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    },
                    "fn": {
                      "type": [
                        "string",
                        "null"
                      ]
                    }
                  },
                  "required": [
                    "node",
                    "id",
                    "value",
                    "lhs",
                    "rhs",
                    "args",
                    "base",
                    "exp",
                    "num",
                    "den",
                    "arg",
                    "var",
                    "from",
                    "to",
                    "body",
                    "fn"
                  ]
                },
                "kind": {
                  "type": "string",
                  "enum": [
                    "given",
                    "derived",
                    "wlog"
                  ]
                },
                "trace": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "id": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              }
            }
          },
          "goal": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "kind",
              "expr",
              "trace",
              "target"
            ],
            "properties": {
              "kind": {
                "type": "string",
                "enum": [
                  "prove",
                  "find",
                  "compute",
                  "maximize",
                  "minimize",
                  "exists",
                  "counterexample"
                ]
              },
              "expr": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "node": {
                    "type": "string",
                    "enum": [
                      "Symbol",
                      "Number",
                      "Bool",
                      "True",
                      "False",
                      "Add",
                      "Mul",
                      "Div",
                      "Pow",
                      "Neg",
                      "Eq",
                      "Neq",
                      "Lt",
                      "Le",
                      "Gt",
                      "Ge",
                      "Divides",
                      "Sum",
                      "Call"
                    ]
                  },
                  "id": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "value": {
                    "type": [
                      "number",
                      "boolean",
                      "null"
                    ]
                  },
                  "lhs": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "rhs": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "args": {
                    "type": [
                      "array",
                      "null"
                    ],
                    "items": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "node": {
                          "type": "string",
                          "enum": [
                            "Symbol",
                            "Number",
                            "Bool",
                            "True",
                            "False",
                            "Add",
                            "Mul",
                            "Div",
                            "Pow",
                            "Neg",
                            "Eq",
                            "Neq",
                            "Lt",
                            "Le",
                            "Gt",
                            "Ge",
                            "Divides",
                            "Sum",
                            "Call"
                          ]
                        }
                      },
                      "required": [
                        "node"
                      ]
                    }
                  },
                  "base": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "exp": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "num": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "den": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "arg": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "var": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "from": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "to": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "body": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "node": {
                        "type": "string",
                        "enum": [
                          "Symbol",
                          "Number",
                          "Bool",
                          "True",
                          "False",
                          "Add",
                          "Mul",
                          "Div",
                          "Pow",
                          "Neg",
                          "Eq",
                          "Neq",
                          "Lt",
                          "Le",
                          "Gt",
                          "Ge",
                          "Divides",
                          "Sum",
                          "Call"
                        ]
                      }
                    },
                    "required": [
                      "node"
                    ]
                  },
                  "fn": {
                    "type": [
                      "string",
                      "null"
                    ]
                  }
                },
                "required": [
                  "node",
                  "id",
                  "value",
                  "lhs",
                  "rhs",
                  "args",
                  "base",
                  "exp",
                  "num",
                  "den",
                  "arg",
                  "var",
                  "from",
                  "to",
                  "body",
                  "fn"
                ]
              },
              "trace": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "target": {
                "type": [
                  "object",
                  "null"
                ],
                "additionalProperties": false,
                "properties": {
                  "node": {
                    "type": "string",
                    "enum": [
                      "Symbol",
                      "Number",
                      "Bool",
                      "True",
                      "False",
                      "Add",
                      "Mul",
                      "Div",
                      "Pow",
                      "Neg",
                      "Eq",
                      "Neq",
                      "Lt",
                      "Le",
                      "Gt",
                      "Ge",
                      "Divides",
                      "Sum",
                      "Call"
                    ]
                  }
                },
                "required": [
                  "node"
                ]
              }
            }
          },
          "concepts": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "id",
                "role",
                "trigger",
                "confidence",
                "trace",
                "name"
              ],
              "properties": {
                "id": {
                  "type": "string"
                },
                "role": {
                  "type": "string",
                  "enum": [
                    "domain",
                    "pattern",
                    "candidate_tool",
                    "definition",
                    "representation_hint"
                  ]
                },
                "trigger": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "confidence": {
                  "type": [
                    "number",
                    "null"
                  ]
                },
                "trace": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "name": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              }
            }
          },
          "warnings": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "code",
                "message",
                "trace",
                "details"
              ],
              "properties": {
                "code": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                },
                "trace": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "details": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "additionalProperties": false,
                  "properties": {},
                  "required": []
                }
              }
            }
          },
          "trace": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "span_id",
                "start",
                "end",
                "text"
              ],
              "properties": {
                "span_id": {
                  "type": "string"
                },
                "start": {
                  "type": "integer",
                  "minimum": 0
                },
                "end": {
                  "type": "integer",
                  "minimum": 0
                },
                "text": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              }
            }
          }
        }
      },
      "strict": true
    }
  }
}